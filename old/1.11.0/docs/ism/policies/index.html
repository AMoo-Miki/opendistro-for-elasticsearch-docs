<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Policies - Open Distro for Elasticsearch Documentation</title> <link rel="shortcut icon" href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135423944-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-135423944-1'); </script> <script type="text/javascript" src="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Policies | Open Distro for Elasticsearch Documentation</title> <meta name="generator" content="Jekyll v3.8.6" /> <meta property="og:title" content="Policies" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation for Open Distro for Elasticsearch, the community-driven, 100% open source distribution of Elasticsearch with advanced security, alerting, deep performance analysis, and more." /> <meta property="og:description" content="Documentation for Open Distro for Elasticsearch, the community-driven, 100% open source distribution of Elasticsearch with advanced security, alerting, deep performance analysis, and more." /> <link rel="canonical" href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/policies/" /> <meta property="og:url" content="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/policies/" /> <meta property="og:site_name" content="Open Distro for Elasticsearch Documentation" /> <script type="application/ld+json"> {"description":"Documentation for Open Distro for Elasticsearch, the community-driven, 100% open source distribution of Elasticsearch with advanced security, alerting, deep performance analysis, and more.","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/assets/images/logo.svg"}},"url":"https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/policies/","headline":"Policies","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script> <!-- SiteCatalyst code version: H.25.1. Copyright 1996-2012 Adobe, Inc. All Rights Reserved --> <script><!-- /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/ var s_code=s.t();if(s_code)document.write(s_code)//--></script> <script language="JavaScript" type="text/javascript"><!-- if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-') //--></script> <noscript> <img src="//amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazonalldev2/1/H.25.1--NS/0" height="1" width="1" border="0" alt="" /> </noscript> <!--/DO NOT REMOVE/--> <!-- End SiteCatalyst code version: H.25.1. --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/version-history/" class="nav-list-link">Version History</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/" class="nav-list-link">Install and Configure</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/docker/" class="nav-list-link">Docker</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/rpm/" class="nav-list-link">RPM</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/deb/" class="nav-list-link">Debian Package</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/helm/" class="nav-list-link">Helm</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/tar/" class="nav-list-link">Tarball</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/windows/" class="nav-list-link">Windows</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/docker-security/" class="nav-list-link">Docker Security Configuration</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/plugins/" class="nav-list-link">Standalone Elasticsearch Plugin Install</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/ami/" class="nav-list-link">Amazon Machine Image</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/other-components/" class="nav-list-link">Other Components</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/encryption-at-rest/" class="nav-list-link">Encryption at Rest</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/" class="nav-list-link">Upgrade</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/1-0-0/" class="nav-list-link">Upgrade to 1.x.x</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/1-11.0/" class="nav-list-link">Upgrade to 1.11.0</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/1-10-1/" class="nav-list-link">Upgrade to 1.10.1</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/1-8-0/" class="nav-list-link">Upgrade to 1.8.0</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/rolling/" class="nav-list-link">Rolling Upgrade</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/cluster-restart/" class="nav-list-link">Cluster Restart Upgrade</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/docker/" class="nav-list-link">Docker Upgrade</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/" class="nav-list-link">Elasticsearch</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/configuration/" class="nav-list-link">Configuration</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/cluster/" class="nav-list-link">Cluster Formation</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/index-data/" class="nav-list-link">Index Data</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/index-alias/" class="nav-list-link">Index Aliases</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/index-templates/" class="nav-list-link">Index Templates</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/reindex-data/" class="nav-list-link">Reindex Data</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/catapis/" class="nav-list-link">CAT API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/term/" class="nav-list-link">Term-Level Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/full-text/" class="nav-list-link">Full-Text Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/search-template/" class="nav-list-link">Search Templates</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/bool/" class="nav-list-link">Boolean Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/ux/" class="nav-list-link">Search Experience</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/logs/" class="nav-list-link">Logs</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/snapshot-restore/" class="nav-list-link">Take and Restore Snapshots</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/units/" class="nav-list-link">Supported Units</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/common-parameters/" class="nav-list-link">Common REST Parameters</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/popular-api/" class="nav-list-link">Popular APIs</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/rest-api-reference/" class="nav-list-link">REST API Reference</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/kibana/" class="nav-list-link">Kibana</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/kibana/plugins/" class="nav-list-link">Standalone Kibana Plugin Install</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/kibana/maptiles/" class="nav-list-link">WMS Map Server</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/" class="nav-list-link">Security</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/" class="nav-list-link">Configuration</a><ul class="nav-list"><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/concepts/" class="nav-list-link">Authentication flow</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/configuration/" class="nav-list-link">Backend Configuration</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/yaml/" class="nav-list-link">YAML Files</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/tls/" class="nav-list-link">TLS Certificates</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/generate-certificates/" class="nav-list-link">Generate Certificates</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/security-admin/" class="nav-list-link">Apply Changes with securityadmin.sh</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/ldap/" class="nav-list-link">Active Directory and LDAP</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/saml/" class="nav-list-link">SAML</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/openid-connect/" class="nav-list-link">OpenID Connect</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/proxy/" class="nav-list-link">Proxy-based authentication</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/disable/" class="nav-list-link">Disable Security</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/" class="nav-list-link">Access Control</a><ul class="nav-list"><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/users-roles/" class="nav-list-link">Users and Roles</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/document-level-security/" class="nav-list-link">Document-Level Security</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/field-level-security/" class="nav-list-link">Field-Level Security</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/field-masking/" class="nav-list-link">Field Masking</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/impersonation/" class="nav-list-link">User Impersonation</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/multi-tenancy/" class="nav-list-link">Kibana Multi-Tenancy</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/cross-cluster-search/" class="nav-list-link">Cross-Cluster Search</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/permissions/" class="nav-list-link">Permissions</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/default-action-groups/" class="nav-list-link">Default Action Groups</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/api/" class="nav-list-link">API</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/audit-logs/" class="nav-list-link">Audit Logs</a><ul class="nav-list"><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/audit-logs/field-reference/" class="nav-list-link">Audit Log Field Reference</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/audit-logs/storage-types/" class="nav-list-link">Audit Log Storage Types</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/" class="nav-list-link">Alerting</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/monitors/" class="nav-list-link">Monitors</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/settings/" class="nav-list-link">Management</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/api/" class="nav-list-link">API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/security-roles/" class="nav-list-link">Security Roles</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/cron/" class="nav-list-link">Cron</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/" class="nav-list-link">SQL</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/workbench/" class="nav-list-link">Workbench</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/cli/" class="nav-list-link">SQL CLI</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/basic/" class="nav-list-link">Basic Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/complex/" class="nav-list-link">Complex Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/partiql/" class="nav-list-link">JSON Support</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/sql-full-text/" class="nav-list-link">Full-Text Search</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/metadata/" class="nav-list-link">Metadata Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/functions/" class="nav-list-link">Functions</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/window/" class="nav-list-link">Window Functions</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/delete/" class="nav-list-link">Delete</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/endpoints/" class="nav-list-link">Endpoint</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/protocol/" class="nav-list-link">Protocol</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/monitoring/" class="nav-list-link">Monitoring</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/settings/" class="nav-list-link">Settings</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/troubleshoot/" class="nav-list-link">Troubleshooting</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/limitation/" class="nav-list-link">Limitations</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/jdbc/" class="nav-list-link">JDBC Driver</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/odbc/" class="nav-list-link">ODBC Driver</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/" class="nav-list-link">PPL</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/endpoint/" class="nav-list-link">Endpoint</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/protocol/" class="nav-list-link">Protocol</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/settings/" class="nav-list-link">Settings</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/commands/" class="nav-list-link">Commands</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/functions/" class="nav-list-link">Functions</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/" class="nav-list-link">Index State Management</a><ul class="nav-list "><li class="nav-list-item active"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/policies/" class="nav-list-link active">Policies</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/managedindices/" class="nav-list-link">Managed Indices</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/settings/" class="nav-list-link">Settings</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/api/" class="nav-list-link">ISM API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/refresh-analyzer/" class="nav-list-link">Refresh Search Analyzer</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/knn/" class="nav-list-link">KNN</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/knn/settings/" class="nav-list-link">Settings and Statistics</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ad/" class="nav-list-link">Anomaly Detection</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ad/api/" class="nav-list-link">Anomaly Detection API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ad/cli/" class="nav-list-link">Anomaly Detection CLI</a></li></ul></li><li class="nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/notebooks/" class="nav-list-link">Notebooks</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/pa/" class="nav-list-link">Performance Analyzer</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/pa/api/" class="nav-list-link">API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/pa/dashboards/" class="nav-list-link">Create Dashboards</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/pa/reference/" class="nav-list-link">Metrics Reference</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/rca/" class="nav-list-link">Root Cause Analysis</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/rca/api/" class="nav-list-link">API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/rca/reference/" class="nav-list-link">RCA Reference</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/" class="nav-list-link">Troubleshoot</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/tls/" class="nav-list-link">Troubleshoot TLS</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/saml/" class="nav-list-link">Troubleshoot SAML</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/openid-connect/" class="nav-list-link">Troubleshoot OpenID Connect</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/security-admin/" class="nav-list-link">Troubleshoot securityadmin.sh</a></li></ul></li><li class="nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/other/" class="nav-list-link">Other Resources</a></li></ul> </nav> <footer class="site-footer"> <p class="text-small text-grey-dk-100">See a problem? Submit <a href="https://github.com/opendistro/for-elasticsearch-docs/issues">issues</a> or <a href="https://github.com/opendistro/for-elasticsearch-docs/edit/master/docs/ism/policies.md">edit this page</a> on <a href="https://github.com/opendistro/for-elasticsearch-docs">GitHub</a>.</p> <p class="text-small text-grey-dk-100 mb-0">© 2020 Amazon Web Services, Inc. or its affiliates. All rights reserved.</p> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search..." aria-label="Search Open Distro for Elasticsearch Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://opendistro.github.io/for-elasticsearch/" class="site-button" > Open Distro for Elasticsearch home </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/">Index State Management</a></li> <li class="breadcrumb-nav-list-item"><span>Policies</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="policies">Policies</h1> <p>Policies are JSON documents that define the following:</p> <ul> <li>The <em>states</em> that an index can be in, including the default state for new indices. For example, you might name your states “hot,” “warm,” “delete,” and so on. For more information, see <a href="#states">States</a>.</li> <li>Any <em>actions</em> that you want the plugin to take when an index enters a state, such as performing a rollover. For more information, see <a href="#actions">Actions</a>.</li> <li>The conditions that must be met for an index to move into a new state, known as <em>transitions</em>. For example, if an index is more than eight weeks old, you might want to move it to the “delete” state. For more information, see <a href="#transitions">Transitions</a>.</li> </ul> <p>In other words, a policy defines the <em>states</em> that an index can be in, the <em>actions</em> to perform when in a state, and the conditions that must be met to <em>transition</em> between states.</p> <p>You have complete flexibility in the way you can design your policies. You can create any state, transition to any other state, and specify any number of actions in each state.</p> <p>This table lists the relevant fields of a policy.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Field</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Required</th> <th>Read Only</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">policy_id</code></td> <td style="text-align: left">The name of the policy.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">Yes</td> <td>Yes</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">description</code></td> <td style="text-align: left">A human-readable description of the policy.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">Yes</td> <td>No</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">last_updated_time</code></td> <td style="text-align: left">The time the policy was last updated.</td> <td style="text-align: left"><code class="highlighter-rouge">timestamp</code></td> <td style="text-align: left">Yes</td> <td>Yes</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">error_notification</code></td> <td style="text-align: left">The destination and message template for error notifications. The destination could be Amazon Chime, Slack, or a webhook URL.</td> <td style="text-align: left"><code class="highlighter-rouge">object</code></td> <td style="text-align: left">No</td> <td>No</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">default_state</code></td> <td style="text-align: left">The default starting state for each index that uses this policy.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">Yes</td> <td>No</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">states</code></td> <td style="text-align: left">The states that you define in the policy.</td> <td style="text-align: left"><code class="highlighter-rouge">nested list of objects</code></td> <td style="text-align: left">Yes</td> <td>No</td> </tr> </tbody> </table></div> <hr /> <h4 id="table-of-contents">Table of contents</h4> <ol id="markdown-toc"> <li><a href="#states" id="markdown-toc-states">States</a></li> <li><a href="#actions" id="markdown-toc-actions">Actions</a></li> <li><a href="#ism-supported-operations" id="markdown-toc-ism-supported-operations">ISM supported operations</a> <ol> <li><a href="#force_merge" id="markdown-toc-force_merge">force_merge</a></li> <li><a href="#read_only" id="markdown-toc-read_only">read_only</a></li> <li><a href="#read_write" id="markdown-toc-read_write">read_write</a></li> <li><a href="#replica_count" id="markdown-toc-replica_count">replica_count</a></li> <li><a href="#close" id="markdown-toc-close">close</a></li> <li><a href="#open" id="markdown-toc-open">open</a></li> <li><a href="#delete" id="markdown-toc-delete">delete</a></li> <li><a href="#rollover" id="markdown-toc-rollover">rollover</a></li> <li><a href="#notification" id="markdown-toc-notification">notification</a></li> <li><a href="#snapshot" id="markdown-toc-snapshot">snapshot</a></li> <li><a href="#index_priority" id="markdown-toc-index_priority">index_priority</a></li> <li><a href="#allocation" id="markdown-toc-allocation">allocation</a></li> </ol> </li> <li><a href="#transitions" id="markdown-toc-transitions">Transitions</a></li> <li><a href="#error-notifications" id="markdown-toc-error-notifications">Error notifications</a></li> <li><a href="#example-policy" id="markdown-toc-example-policy">Example policy</a></li> </ol> <hr /> <h2 id="states">States</h2> <p>A state is the description of the status that the managed index is currently in. A managed index can be in only one state at a time. Each state has associated actions that are executed sequentially on entering a state and transitions that are checked after all the actions have been completed.</p> <p>This table lists the parameters that you can define for a state.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Field</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Required</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">name</code></td> <td style="text-align: left">The name of the state.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">Yes</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">actions</code></td> <td style="text-align: left">The actions to execute after entering a state. For more information, see <a href="#actions">Actions</a>.</td> <td style="text-align: left"><code class="highlighter-rouge">nested list of objects</code></td> <td style="text-align: left">Yes</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">transitions</code></td> <td style="text-align: left">The next states and the conditions required to transition to those states. If no transitions exist, the policy assumes that it’s complete and can now stop managing the index. For more information, see <a href="#transitions">Transitions</a>.</td> <td style="text-align: left"><code class="highlighter-rouge">nested list of objects</code></td> <td style="text-align: left">Yes</td> </tr> </tbody> </table></div> <hr /> <h2 id="actions">Actions</h2> <p>Actions are the steps that the policy sequentially executes on entering a specific state.</p> <p>They are executed in the order in which they are defined.</p> <p>This table lists the parameters that you can define for an action.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Parameter</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Required</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">timeout</code></td> <td style="text-align: left">The timeout period for the action. Accepts time units for minutes, hours, and days.</td> <td style="text-align: left"><code class="highlighter-rouge">time unit</code></td> <td style="text-align: left">No</td> <td>-</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">retry</code></td> <td style="text-align: left">The retry configuration for the action.</td> <td style="text-align: left"><code class="highlighter-rouge">object</code></td> <td style="text-align: left">No</td> <td>Specific to action</td> </tr> </tbody> </table></div> <p>The <code class="highlighter-rouge">retry</code> operation has the following parameters:</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Parameter</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Required</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">count</code></td> <td style="text-align: left">The number of retry counts.</td> <td style="text-align: left"><code class="highlighter-rouge">number</code></td> <td style="text-align: left">Yes</td> <td>-</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">backoff</code></td> <td style="text-align: left">The backoff policy type to use when retrying.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">No</td> <td>Exponential</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">delay</code></td> <td style="text-align: left">The time to wait between retries. Accepts time units for minutes, hours, and days.</td> <td style="text-align: left"><code class="highlighter-rouge">time unit</code></td> <td style="text-align: left">No</td> <td>1 minute</td> </tr> </tbody> </table></div> <p>The following example action has a timeout period of one hour. The policy retries this action three times with an exponential backoff policy, with a delay of 10 minutes between each retry:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"timeout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1h"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"retry"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"backoff"</span><span class="p">:</span><span class="w"> </span><span class="s2">"exponential"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"delay"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10m"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>For a list of available unit types, see <a href="../../elasticsearch/units/">Supported units</a>.</p> <h2 id="ism-supported-operations">ISM supported operations</h2> <p>ISM supports the following operations:</p> <ul> <li><a href="#forcemerge">force_merge</a></li> <li><a href="#read_only">read_only</a></li> <li><a href="#read_write">read_write</a></li> <li><a href="#replica_count">replica_count</a></li> <li><a href="#close">close</a></li> <li><a href="#open">open</a></li> <li><a href="#delete">delete</a></li> <li><a href="#rollover">rollover</a></li> <li><a href="#notification">notification</a></li> <li><a href="#snapshot">snapshot</a></li> <li><a href="#index_priority">index_priority</a></li> <li><a href="#allocation">allocation</a></li> </ul> <h3 id="force_merge">force_merge</h3> <p>Reduces the number of Lucene segments by merging the segments of individual shards. This operation attempts to set the index to a <code class="highlighter-rouge">read-only</code> state before starting the merging process.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Parameter</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Required</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">max_num_segments</code></td> <td style="text-align: left">The number of segments to reduce the shard to.</td> <td style="text-align: left"><code class="highlighter-rouge">number</code></td> <td style="text-align: left">Yes</td> </tr> </tbody> </table></div> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"force_merge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"max_num_segments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="read_only">read_only</h3> <p>Sets a managed index to be read only.</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"read_only"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="read_write">read_write</h3> <p>Sets a managed index to be writeable.</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"read_write"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="replica_count">replica_count</h3> <p>Sets the number of replicas to assign to an index.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Parameter</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Required</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">number_of_replicas</code></td> <td style="text-align: left">Defines the number of replicas to assign to an index.</td> <td style="text-align: left"><code class="highlighter-rouge">number</code></td> <td style="text-align: left">Yes</td> </tr> </tbody> </table></div> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"replica_count"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"number_of_replicas"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>For information about setting replicas, see <a href="../../elasticsearch/#primary-and-replica-shards">Primary and replica shards</a>.</p> <h3 id="close">close</h3> <p>Closes the managed index.</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"close"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>Closed indices remain on disk, but consume no CPU or memory. You can’t read from, write to, or search closed indices.</p> <p>Closing an index is a good option if you need to retain data for longer than you need to actively search it and have sufficient disk space on your data nodes. If you need to search the data again, reopening a closed index is simpler than restoring an index from a snapshot.</p> <h3 id="open">open</h3> <p>Opens a managed index.</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"open"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="delete">delete</h3> <p>Deletes a managed index.</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"delete"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="rollover">rollover</h3> <p>Rolls an alias over to a new index when the managed index meets one of the rollover conditions.</p> <p>The index format must match the pattern: <code class="highlighter-rouge">^.*-\d+$</code>. For example, <code class="highlighter-rouge">(logs-000001)</code>. Set <code class="highlighter-rouge">index.opendistro.index_state_management.rollover_alias</code> as the alias to rollover.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Parameter</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Example</th> <th>Required</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">min_size</code></td> <td style="text-align: left">The minimum size of the total primary shard storage (not counting replicas) required to roll over the index. For example, if you set <code class="highlighter-rouge">min_size</code> to 100 GiB and your index has 5 primary shards and 5 replica shards of 20 GiB each, the total size of the primaries is 100 GiB, so the rollover occurs. ISM doesn’t check indices continually, so it doesn’t roll over indices at exactly 100 GiB. Instead, if an index is continuously growing, ISM might check it at 99 GiB, not perform the rollover, check again when the shards reach 105 GiB, and then perform the operation.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left"><code class="highlighter-rouge">20gb</code> or <code class="highlighter-rouge">5mb</code></td> <td>No</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">min_doc_count</code></td> <td style="text-align: left">The minimum number of documents required to roll over the index.</td> <td style="text-align: left"><code class="highlighter-rouge">number</code></td> <td style="text-align: left"><code class="highlighter-rouge">2000000</code></td> <td>No</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">min_index_age</code></td> <td style="text-align: left">The minimum age required to roll over the index. Index age is the time between its creation and the present.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left"><code class="highlighter-rouge">5d</code> or <code class="highlighter-rouge">7h</code></td> <td>No</td> </tr> </tbody> </table></div> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"rollover"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"min_size"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50gb"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"rollover"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"min_doc_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">100000000</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"rollover"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"min_index_age"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30d"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="notification">notification</h3> <p>Sends you a notification.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Parameter</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Required</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">destination</code></td> <td style="text-align: left">The destination URL.</td> <td style="text-align: left"><code class="highlighter-rouge">Slack, Amazon Chime, or webhook URL</code></td> <td style="text-align: left">Yes</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">message_template</code></td> <td style="text-align: left">The text of the message. You can add variables to your messages using <a href="https://mustache.github.io/mustache.5.html">Mustache templates</a>.</td> <td style="text-align: left"><code class="highlighter-rouge">object</code></td> <td style="text-align: left">Yes</td> </tr> </tbody> </table></div> <p>The destination system <strong>must</strong> return a response otherwise the notification operation throws an error.</p> <h4 id="example-1-chime-notification">Example 1: Chime notification</h4> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"notification"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"chime"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;url&gt;"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"message_template"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the index is {{ctx.index}}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h4 id="example-2-custom-webhook-notification">Example 2: Custom webhook notification</h4> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"notification"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"custom_webhook"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://&lt;your_webhook&gt;"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"message_template"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the index is {{ctx.index}}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h4 id="example-3-slack-notification">Example 3: Slack notification</h4> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"notification"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"slack"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://hooks.slack.com/services/xxx/xxxxxx"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"message_template"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the index is {{ctx.index}}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>You can use <code class="highlighter-rouge">ctx</code> variables in your message to represent a number of policy parameters based on the past executions of your policy. For example, if your policy has a rollover action, you can use <code class="highlighter-rouge">{{ctx.action.name}}</code> in your message to represent the name of the rollover.</p> <p>The following <code class="highlighter-rouge">ctx</code> variable options are available for every policy:</p> <h4 id="guaranteed-variables">Guaranteed variables</h4> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Parameter</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">index</code></td> <td style="text-align: left">The name of the index.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">index_uuid</code></td> <td style="text-align: left">The uuid of the index.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">policy_id</code></td> <td style="text-align: left">The name of the policy.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> </tr> </tbody> </table></div> <h3 id="snapshot">snapshot</h3> <p>Backup your cluster’s indices and state. For more information about snapshots, see <a href="../../elasticsearch/snapshot-restore/">Take and restore snapshots</a>.</p> <p>The <code class="highlighter-rouge">snapshot</code> operation has the following parameters:</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Parameter</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Required</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">repository</code></td> <td style="text-align: left">The repository name that you register through the native snapshot API operations.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">Yes</td> <td>-</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">snapshot</code></td> <td style="text-align: left">The name of the snapshot.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">Yes</td> <td>-</td> </tr> </tbody> </table></div> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"snapshot"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"repository"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_backup"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"snapshot"</span><span class="p">:</span><span class="w"> </span><span class="s2">"my_snapshot"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="index_priority">index_priority</h3> <p>Set the priority for the index in a specific state. Unallocated shards of indices are recovered in the order of their priority, whenever possible. The indices with higher priority values are recovered first followed by the indices with lower priority values.</p> <p>The <code class="highlighter-rouge">index_priority</code> operation has the following parameter:</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Parameter</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Required</th> <th style="text-align: left">Default</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">priority</code></td> <td style="text-align: left">The priority for the index as soon as it enters a state.</td> <td style="text-align: left"><code class="highlighter-rouge">number</code></td> <td style="text-align: left">Yes</td> <td style="text-align: left">1</td> </tr> </tbody> </table></div> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"index_priority"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <h3 id="allocation">allocation</h3> <p>Allocate the index to a node with a specific attribute. For example, setting <code class="highlighter-rouge">require</code> to <code class="highlighter-rouge">warm</code> moves your data only to “warm” nodes.</p> <p>The <code class="highlighter-rouge">allocation</code> operation has the following parameters:</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Parameter</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Required</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">require</code></td> <td style="text-align: left">Allocate the index to a node with a specified attribute.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">Yes</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">include</code></td> <td style="text-align: left">Allocate the index to a node with any of the specified attributes.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">Yes</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">exclude</code></td> <td style="text-align: left">Don’t allocate the index to a node with any of the specified attributes.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">Yes</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">wait_for</code></td> <td style="text-align: left">Wait for the policy to execute before allocating the index to a node with a specified attribute.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">Yes</td> </tr> </tbody> </table></div> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"allocation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"require"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"box_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"warm"</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <hr /> <h2 id="transitions">Transitions</h2> <p>Transitions define the conditions that need to be met for a state to change. After all actions in the current state are completed, the policy starts checking the conditions for transitions.</p> <p>Transitions are evaluated in the order in which they are defined. For example, if the conditions for the first transition are met, then this transition takes place and the rest of the transitions are dismissed.</p> <p>If you don’t specify any conditions in a transition and leave it empty, then it’s assumed to be the equivalent of always true. This means that the policy transitions the index to this state the moment it checks.</p> <p>This table lists the parameters you can define for transitions.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Parameter</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Required</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">state_name</code></td> <td style="text-align: left">The name of the state to transition to if the conditions are met.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">Yes</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">conditions</code></td> <td style="text-align: left">List the conditions for the transition.</td> <td style="text-align: left"><code class="highlighter-rouge">list</code></td> <td style="text-align: left">Yes</td> </tr> </tbody> </table></div> <p>The <code class="highlighter-rouge">conditions</code> object has the following parameters:</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Parameter</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Required</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">min_index_age</code></td> <td style="text-align: left">The minimum age of the index required to transition.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">No</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">min_doc_count</code></td> <td style="text-align: left">The minimum document count of the index required to transition.</td> <td style="text-align: left"><code class="highlighter-rouge">number</code></td> <td style="text-align: left">No</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">min_size</code></td> <td style="text-align: left">The minimum size of the index required to transition.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">No</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">cron</code></td> <td style="text-align: left">The <code class="highlighter-rouge">cron</code> job that triggers the transition if no other transition happens first.</td> <td style="text-align: left"><code class="highlighter-rouge">object</code></td> <td style="text-align: left">No</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">cron.cron.expression</code></td> <td style="text-align: left">The <code class="highlighter-rouge">cron</code> expression that triggers the transition.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">Yes</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">cron.cron.timezone</code></td> <td style="text-align: left">The timezone that triggers the transition.</td> <td style="text-align: left"><code class="highlighter-rouge">string</code></td> <td style="text-align: left">Yes</td> </tr> </tbody> </table></div> <p>The following example transitions the index to a <code class="highlighter-rouge">cold</code> state after a period of 30 days:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"transitions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"state_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cold"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"conditions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"min_index_age"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30d"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p>ISM checks the conditions on every execution of the policy based on the set interval.</p> <p>This example uses the <code class="highlighter-rouge">cron</code> condition to transition indices every Saturday at 5:00 PT:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"transitions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"state_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cold"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"conditions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"cron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"cron"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"expression"</span><span class="p">:</span><span class="w"> </span><span class="s2">"* 17 * * SAT"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <p>Note that this condition does not execute at exactly 5:00 PM; the job still executes based off the <code class="highlighter-rouge">job_interval</code> setting. Due to this variance in start time and the amount of time that it can take for actions to complete prior to checking transition conditions, we recommend against overly narrow cron expressions. For example, don’t use <code class="highlighter-rouge">15 17 * * SAT</code> (5:15 PM on Saturday).</p> <p>A window of an hour, which this example uses, is generally sufficient, but you might increase it to 2–3 hours to avoid missing the window and having to wait a week for the transition to occur. Alternately, you could use a broader expression such as <code class="highlighter-rouge">* * * * SAT,SUN</code> to have the transition occur at any time during the weekend.</p> <p>For information on writing cron expressions, see <a href="../../alerting/cron/">Cron expression reference</a>.</p> <hr /> <h2 id="error-notifications">Error notifications</h2> <p>The <code class="highlighter-rouge">error_notification</code> operation sends you a notification if your managed index fails. It notifies a single destination with a custom message.</p> <p>Set up error notifications at the policy level:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"policy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hot warm delete workflow"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"default_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hot"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"schema_version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"error_notification"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"states"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Parameter</th> <th style="text-align: left">Description</th> <th style="text-align: left">Type</th> <th style="text-align: left">Required</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">destination</code></td> <td style="text-align: left">The destination URL.</td> <td style="text-align: left"><code class="highlighter-rouge">Slack, Amazon Chime, or webhook URL</code></td> <td style="text-align: left">Yes</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">message_template</code></td> <td style="text-align: left">The text of the message. You can add variables to your messages using <a href="https://mustache.github.io/mustache.5.html">Mustache templates</a>.</td> <td style="text-align: left"><code class="highlighter-rouge">object</code></td> <td style="text-align: left">Yes</td> </tr> </tbody> </table></div> <p>The destination system <strong>must</strong> return a response otherwise the <code class="highlighter-rouge">error_notification</code> operation throws an error.</p> <h4 id="example-1-chime-notification-1">Example 1: Chime notification</h4> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error_notification"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"chime"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;url&gt;"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"message_template"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The index {{ctx.index}} failed during policy execution."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h4 id="example-2-custom-webhook-notification-1">Example 2: Custom webhook notification</h4> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error_notification"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"custom_webhook"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://&lt;your_webhook&gt;"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"message_template"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The index {{ctx.index}} failed during policy execution."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h4 id="example-3-slack-notification-1">Example 3: Slack notification</h4> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error_notification"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"slack"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://hooks.slack.com/services/xxx/xxxxxx"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"message_template"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The index {{ctx.index}} failed during policy execution."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>You can use the same options for <code class="highlighter-rouge">ctx</code> variables as the <a href="#notification">notification</a> operation.</p> <h2 id="example-policy">Example policy</h2> <p>The following example policy implements a <code class="highlighter-rouge">hot</code>, <code class="highlighter-rouge">warm</code>, and <code class="highlighter-rouge">delete</code> workflow. You can use this policy as a template to prioritize resources to your indices based on their levels of activity.</p> <p>In this case, an index is initially in a <code class="highlighter-rouge">hot</code> state. After a day, it changes to a <code class="highlighter-rouge">warm</code> state, where the number of replicas increases to 5 to improve the read performance.</p> <p>After 30 days, the policy moves this index into a <code class="highlighter-rouge">delete</code> state. The service sends a notification to a Chime room that the index is being deleted, and then permanently deletes it.</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"policy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hot warm delete workflow"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"default_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hot"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"schema_version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"states"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hot"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"rollover"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"min_index_age"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1d"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"transitions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"state_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"warm"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"warm"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"replica_count"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"number_of_replicas"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"transitions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"state_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delete"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"conditions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"min_index_age"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30d"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delete"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"actions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"notification"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"chime"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;URL&gt;"</span><span class="w">
                </span><span class="p">}</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"message_template"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The index {{ctx.index}} is being deleted"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"delete"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>This diagram shows the <code class="highlighter-rouge">states</code>, <code class="highlighter-rouge">transitions</code>, and <code class="highlighter-rouge">actions</code> of the above policy as a finite-state machine. For more information about finite-state machines, see <a href="https://en.wikipedia.org/wiki/Finite-state_machine">Wikipedia</a>.</p> <p><img src="../../images/ism.png" alt="Policy State Machine" /></p> </div> </div> <div class="toc"> <ul class="toc-list"> <li class="toc-item"><a href="#states">States</a></li> <li class="toc-item"><a href="#actions">Actions</a></li> <li class="toc-item"><a href="#ism-supported-operations">ISM supported operations</a></li> <li class="toc-item"><a href="#transitions">Transitions</a></li> <li class="toc-item"><a href="#error-notifications">Error notifications</a></li> <li class="toc-item"><a href="#example-policy">Example policy</a></li> </ul> </div> <div class="search-overlay"></div> </div> <script> anchors.add(); </script> </body> </html>
