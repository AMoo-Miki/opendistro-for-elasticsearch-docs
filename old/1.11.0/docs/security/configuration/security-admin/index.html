<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Apply Changes with securityadmin.sh - Open Distro for Elasticsearch Documentation</title> <link rel="shortcut icon" href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135423944-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-135423944-1'); </script> <script type="text/javascript" src="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Apply Changes with securityadmin.sh | Open Distro for Elasticsearch Documentation</title> <meta name="generator" content="Jekyll v3.8.6" /> <meta property="og:title" content="Apply Changes with securityadmin.sh" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation for Open Distro for Elasticsearch, the community-driven, 100% open source distribution of Elasticsearch with advanced security, alerting, deep performance analysis, and more." /> <meta property="og:description" content="Documentation for Open Distro for Elasticsearch, the community-driven, 100% open source distribution of Elasticsearch with advanced security, alerting, deep performance analysis, and more." /> <link rel="canonical" href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/security-admin/" /> <meta property="og:url" content="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/security-admin/" /> <meta property="og:site_name" content="Open Distro for Elasticsearch Documentation" /> <script type="application/ld+json"> {"description":"Documentation for Open Distro for Elasticsearch, the community-driven, 100% open source distribution of Elasticsearch with advanced security, alerting, deep performance analysis, and more.","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/assets/images/logo.svg"}},"url":"https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/security-admin/","headline":"Apply Changes with securityadmin.sh","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script> <!-- SiteCatalyst code version: H.25.1. Copyright 1996-2012 Adobe, Inc. All Rights Reserved --> <script><!-- /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/ var s_code=s.t();if(s_code)document.write(s_code)//--></script> <script language="JavaScript" type="text/javascript"><!-- if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-') //--></script> <noscript> <img src="//amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazonalldev2/1/H.25.1--NS/0" height="1" width="1" border="0" alt="" /> </noscript> <!--/DO NOT REMOVE/--> <!-- End SiteCatalyst code version: H.25.1. --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/version-history/" class="nav-list-link">Version History</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/" class="nav-list-link">Install and Configure</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/docker/" class="nav-list-link">Docker</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/rpm/" class="nav-list-link">RPM</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/deb/" class="nav-list-link">Debian Package</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/helm/" class="nav-list-link">Helm</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/tar/" class="nav-list-link">Tarball</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/windows/" class="nav-list-link">Windows</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/docker-security/" class="nav-list-link">Docker Security Configuration</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/plugins/" class="nav-list-link">Standalone Elasticsearch Plugin Install</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/ami/" class="nav-list-link">Amazon Machine Image</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/other-components/" class="nav-list-link">Other Components</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/encryption-at-rest/" class="nav-list-link">Encryption at Rest</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/" class="nav-list-link">Upgrade</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/1-0-0/" class="nav-list-link">Upgrade to 1.x.x</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/1-11.0/" class="nav-list-link">Upgrade to 1.11.0</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/1-10-1/" class="nav-list-link">Upgrade to 1.10.1</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/1-8-0/" class="nav-list-link">Upgrade to 1.8.0</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/rolling/" class="nav-list-link">Rolling Upgrade</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/cluster-restart/" class="nav-list-link">Cluster Restart Upgrade</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/docker/" class="nav-list-link">Docker Upgrade</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/" class="nav-list-link">Elasticsearch</a><ul class="nav-list "><li class="nav-list-item active"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/configuration/" class="nav-list-link">Configuration</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/cluster/" class="nav-list-link">Cluster Formation</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/index-data/" class="nav-list-link">Index Data</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/index-alias/" class="nav-list-link">Index Aliases</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/index-templates/" class="nav-list-link">Index Templates</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/reindex-data/" class="nav-list-link">Reindex Data</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/catapis/" class="nav-list-link">CAT API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/term/" class="nav-list-link">Term-Level Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/full-text/" class="nav-list-link">Full-Text Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/search-template/" class="nav-list-link">Search Templates</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/bool/" class="nav-list-link">Boolean Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/ux/" class="nav-list-link">Search Experience</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/logs/" class="nav-list-link">Logs</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/snapshot-restore/" class="nav-list-link">Take and Restore Snapshots</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/units/" class="nav-list-link">Supported Units</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/common-parameters/" class="nav-list-link">Common REST Parameters</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/popular-api/" class="nav-list-link">Popular APIs</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/rest-api-reference/" class="nav-list-link">REST API Reference</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/kibana/" class="nav-list-link">Kibana</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/kibana/plugins/" class="nav-list-link">Standalone Kibana Plugin Install</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/kibana/maptiles/" class="nav-list-link">WMS Map Server</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/" class="nav-list-link">Security</a><ul class="nav-list "><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/" class="nav-list-link">Configuration</a><ul class="nav-list"><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/concepts/" class="nav-list-link">Authentication flow</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/configuration/" class="nav-list-link">Backend Configuration</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/yaml/" class="nav-list-link">YAML Files</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/tls/" class="nav-list-link">TLS Certificates</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/generate-certificates/" class="nav-list-link">Generate Certificates</a> </li><li class="nav-list-item active"> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/security-admin/" class="nav-list-link active">Apply Changes with securityadmin.sh</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/ldap/" class="nav-list-link">Active Directory and LDAP</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/saml/" class="nav-list-link">SAML</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/openid-connect/" class="nav-list-link">OpenID Connect</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/proxy/" class="nav-list-link">Proxy-based authentication</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/disable/" class="nav-list-link">Disable Security</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/" class="nav-list-link">Access Control</a><ul class="nav-list"><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/users-roles/" class="nav-list-link">Users and Roles</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/document-level-security/" class="nav-list-link">Document-Level Security</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/field-level-security/" class="nav-list-link">Field-Level Security</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/field-masking/" class="nav-list-link">Field Masking</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/impersonation/" class="nav-list-link">User Impersonation</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/multi-tenancy/" class="nav-list-link">Kibana Multi-Tenancy</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/cross-cluster-search/" class="nav-list-link">Cross-Cluster Search</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/permissions/" class="nav-list-link">Permissions</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/default-action-groups/" class="nav-list-link">Default Action Groups</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/api/" class="nav-list-link">API</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/audit-logs/" class="nav-list-link">Audit Logs</a><ul class="nav-list"><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/audit-logs/field-reference/" class="nav-list-link">Audit Log Field Reference</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/audit-logs/storage-types/" class="nav-list-link">Audit Log Storage Types</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/" class="nav-list-link">Alerting</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/monitors/" class="nav-list-link">Monitors</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/settings/" class="nav-list-link">Management</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/api/" class="nav-list-link">API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/security-roles/" class="nav-list-link">Security Roles</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/cron/" class="nav-list-link">Cron</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/" class="nav-list-link">SQL</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/workbench/" class="nav-list-link">Workbench</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/cli/" class="nav-list-link">SQL CLI</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/basic/" class="nav-list-link">Basic Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/complex/" class="nav-list-link">Complex Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/partiql/" class="nav-list-link">JSON Support</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/sql-full-text/" class="nav-list-link">Full-Text Search</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/metadata/" class="nav-list-link">Metadata Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/functions/" class="nav-list-link">Functions</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/window/" class="nav-list-link">Window Functions</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/delete/" class="nav-list-link">Delete</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/endpoints/" class="nav-list-link">Endpoint</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/protocol/" class="nav-list-link">Protocol</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/monitoring/" class="nav-list-link">Monitoring</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/settings/" class="nav-list-link">Settings</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/troubleshoot/" class="nav-list-link">Troubleshooting</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/limitation/" class="nav-list-link">Limitations</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/jdbc/" class="nav-list-link">JDBC Driver</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/odbc/" class="nav-list-link">ODBC Driver</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/" class="nav-list-link">PPL</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/endpoint/" class="nav-list-link">Endpoint</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/protocol/" class="nav-list-link">Protocol</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/settings/" class="nav-list-link">Settings</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/commands/" class="nav-list-link">Commands</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/functions/" class="nav-list-link">Functions</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/" class="nav-list-link">Index State Management</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/policies/" class="nav-list-link">Policies</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/managedindices/" class="nav-list-link">Managed Indices</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/settings/" class="nav-list-link">Settings</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/api/" class="nav-list-link">ISM API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/refresh-analyzer/" class="nav-list-link">Refresh Search Analyzer</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/knn/" class="nav-list-link">KNN</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/knn/settings/" class="nav-list-link">Settings and Statistics</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ad/" class="nav-list-link">Anomaly Detection</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ad/api/" class="nav-list-link">Anomaly Detection API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ad/cli/" class="nav-list-link">Anomaly Detection CLI</a></li></ul></li><li class="nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/notebooks/" class="nav-list-link">Notebooks</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/pa/" class="nav-list-link">Performance Analyzer</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/pa/api/" class="nav-list-link">API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/pa/dashboards/" class="nav-list-link">Create Dashboards</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/pa/reference/" class="nav-list-link">Metrics Reference</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/rca/" class="nav-list-link">Root Cause Analysis</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/rca/api/" class="nav-list-link">API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/rca/reference/" class="nav-list-link">RCA Reference</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/" class="nav-list-link">Troubleshoot</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/tls/" class="nav-list-link">Troubleshoot TLS</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/saml/" class="nav-list-link">Troubleshoot SAML</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/openid-connect/" class="nav-list-link">Troubleshoot OpenID Connect</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/security-admin/" class="nav-list-link">Troubleshoot securityadmin.sh</a></li></ul></li><li class="nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/other/" class="nav-list-link">Other Resources</a></li></ul> </nav> <footer class="site-footer"> <p class="text-small text-grey-dk-100">See a problem? Submit <a href="https://github.com/opendistro/for-elasticsearch-docs/issues">issues</a> or <a href="https://github.com/opendistro/for-elasticsearch-docs/edit/master/docs/security/configuration/security-admin.md">edit this page</a> on <a href="https://github.com/opendistro/for-elasticsearch-docs">GitHub</a>.</p> <p class="text-small text-grey-dk-100 mb-0">© 2020 Amazon Web Services, Inc. or its affiliates. All rights reserved.</p> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search..." aria-label="Search Open Distro for Elasticsearch Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://opendistro.github.io/for-elasticsearch/" class="site-button" > Open Distro for Elasticsearch home </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/">Security</a></li> <li class="breadcrumb-nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/">Configuration</a></li> <li class="breadcrumb-nav-list-item"><span>Apply Changes with securityadmin.sh</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="apply-configuration-changes-using-securityadminsh">Apply configuration changes using securityadmin.sh</h1> <p>The security plugin stores its configuration—including users, roles, and permissions—in an index on the Elasticsearch cluster (<code class="highlighter-rouge">.opendistro_security</code>). Storing these settings in an index lets you change settings without restarting the cluster and eliminates the need to edit configuration files on every single node.</p> <p>After changing any of the configuration files in <code class="highlighter-rouge">plugins/opendistro_security/securityconfig</code>, however, you must run <code class="highlighter-rouge">plugins/opendistro_security/tools/securityadmin.sh</code> to load these new settings into the index. You must also run this script at least once to initialize the <code class="highlighter-rouge">.opendistro_security</code> index and configure your authentication and authorization methods.</p> <p>After the <code class="highlighter-rouge">.opendistro_security</code> index is initialized, you can use Kibana to manage your users, roles, and permissions.</p> <h2 id="configure-the-admin-certificate">Configure the admin certificate</h2> <p>You can configure all certificates that should have admin privileges in <code class="highlighter-rouge">elasticsearch.yml</code> stating their respective distinguished names (DNs). If you use the demo certificates, for example, you can use the <code class="highlighter-rouge">kirk</code> certificate:</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">opendistro_security.authcz.admin_dn</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">CN=kirk,OU=client,O=client,L=test,C=DE</span>
</code></pre></div></div> <p class="warning">You can’t use node certificates as admin certificates. The two must be separate. Also, do not use any whitespace between the parts of the DN.</p> <h2 id="basic-usage">Basic usage</h2> <p>The <code class="highlighter-rouge">securityadmin.sh</code> tool can be run from any machine that has access to the transport port of your Elasticsearch cluster (the default is 9300). You can change the security plugin configuration without having to access your nodes through SSH.</p> <p>Each node also includes the tool at <code class="highlighter-rouge">plugins/opendistro_security/tools/securityadmin.sh</code>. You might need to make the script executable before running it:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">chmod</span> +x plugins/opendistro_security/tools/securityadmin.sh
</code></pre></div></div> <p>To print all available command line options, run the script with no arguments:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./plugins/opendistro_security/tools/securityadmin.sh
</code></pre></div></div> <p>To load configuration changes to the security plugin, you must provide your admin certificate to the tool:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./securityadmin.sh <span class="nt">-cd</span> ../securityconfig/ <span class="nt">-icl</span> <span class="nt">-nhnv</span>  
   <span class="nt">-cacert</span> ../../../config/root-ca.pem
   <span class="nt">-cert</span> ../../../config/kirk.pem
   <span class="nt">-key</span> ../../../config/kirk-key.pem
</code></pre></div></div> <ul> <li>The <code class="highlighter-rouge">-cd</code> option specifies where the security plugin configuration files to upload to the cluster can be found.</li> <li>The <code class="highlighter-rouge">-icl</code> (<code class="highlighter-rouge">--ignore-clustername</code>) option tells the security plugin to upload the configuration regardless of the cluster name. As an alternative, you can also specify the cluster name with the <code class="highlighter-rouge">-cn</code> (<code class="highlighter-rouge">--clustername</code>) option.</li> <li>Because the demo certificates are self-signed, we also disable hostname verification with the <code class="highlighter-rouge">-nhnv</code> (<code class="highlighter-rouge">--disable-host-name-verification</code>) option.</li> <li>The <code class="highlighter-rouge">-cacert</code>, <code class="highlighter-rouge">-cert</code> and <code class="highlighter-rouge">-key</code> options define the location of your root CA certificate, the admin certificate, and the private key for the admin certificate. If the private key has a password, specify it with the <code class="highlighter-rouge">-keypass</code> option.</li> </ul> <p>The following table shows the PEM options.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">-cert</code></td> <td style="text-align: left">The location of the PEM file containing the admin certificate and all intermediate certificates, if any. You can use an absolute or relative path. Relative paths are resolved relative to the execution directory of <code class="highlighter-rouge">securityadmin.sh</code>.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-key</code></td> <td style="text-align: left">The location of the PEM file containing the private key of the admin certificate. You can use an absolute or relative path. Relative paths are resolved relative to the execution directory of <code class="highlighter-rouge">securityadmin.sh</code>. The key must be in PKCS#8 format.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-keypass</code></td> <td style="text-align: left">The password of the private key of the admin certificate, if any.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-cacert</code></td> <td style="text-align: left">The location of the PEM file containing the root certificate. You can use an absolute or relative path. Relative paths are resolved relative to the execution directory of <code class="highlighter-rouge">securityadmin.sh</code>.</td> </tr> </tbody> </table></div> <h2 id="sample-commands">Sample commands</h2> <p>Apply configuration in <code class="highlighter-rouge">securityconfig</code> using PEM certificates:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/share/elasticsearch/plugins/opendistro_security/tools/securityadmin.sh <span class="nt">-cacert</span> /etc/elasticsearch/root-ca.pem <span class="nt">-cert</span> /etc/elasticsearch/kirk.pem <span class="nt">-key</span> /etc/elasticsearch/kirk-key.pem <span class="nt">-cd</span> /usr/share/elasticsearch/plugins/opendistro_security/securityconfig/
</code></pre></div></div> <p>Apply configuration from a single file (<code class="highlighter-rouge">config.yml</code>) using PEM certificates:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./securityadmin.sh <span class="nt">-f</span> ../securityconfig/config.yml <span class="nt">-icl</span> <span class="nt">-nhnv</span> <span class="nt">-cert</span> /etc/elasticsearch/kirk.pem <span class="nt">-cacert</span> /etc/elasticsearch/root-ca.pem <span class="nt">-h</span> <span class="nt">-key</span> /etc/elasticsearch/kirk-key.pem <span class="nt">-t</span> config
</code></pre></div></div> <p>Apply configuration in <code class="highlighter-rouge">securityconfig</code> with keystore and truststore files:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./securityadmin.sh <span class="se">\</span>
   <span class="nt">-cd</span> /usr/share/elasticsearch/plugins/opendistro_security/securityconfig/ <span class="se">\</span>
   <span class="nt">-ks</span> /path/to/keystore.jks <span class="se">\</span>
   <span class="nt">-kspass</span> changeit <span class="se">\</span>
   <span class="nt">-ts</span> /path/to/truststore.jks <span class="se">\</span>
   <span class="nt">-tspass</span> changeit
   <span class="nt">-nhnv</span>
   <span class="nt">-icl</span>
</code></pre></div></div> <h2 id="using-securityadmin-with-keystore-and-truststore-files">Using securityadmin with keystore and truststore files</h2> <p>You can also use keystore files in JKS format in conjunction with <code class="highlighter-rouge">securityadmin.sh</code>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./securityadmin.sh <span class="nt">-cd</span> ../securityconfig <span class="nt">-icl</span> <span class="nt">-nhnv</span>
  <span class="nt">-ts</span> &lt;path/to/truststore&gt; <span class="nt">-tspass</span> &lt;truststore password&gt;
  <span class="nt">-ks</span> &lt;path/to/keystore&gt; <span class="nt">-kspass</span> &lt;keystore password&gt;
</code></pre></div></div> <p>Use the following options to control the key and truststore settings.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">-ks</code></td> <td style="text-align: left">The location of the keystore containing the admin certificate and all intermediate certificates, if any. You can use an absolute or relative path. Relative paths are resolved relative to the execution directory of <code class="highlighter-rouge">securityadmin.sh</code>.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-kspass</code></td> <td style="text-align: left">The password for the keystore.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-kst</code></td> <td style="text-align: left">The key store type, either JKS or PKCS#12/PFX. If not specified, the security plugin tries to determine the type from the file extension.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-ksalias</code></td> <td style="text-align: left">The alias of the admin certificate, if any.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-ts</code></td> <td style="text-align: left">The location of the truststore containing the root certificate. You can use an absolute or relative path. Relative paths are resolved relative to the execution directory of <code class="highlighter-rouge">securityadmin.sh</code>.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-tspass</code></td> <td style="text-align: left">The password for the truststore.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-tst</code></td> <td style="text-align: left">The truststore type, either JKS or PKCS#12/PFX. If not specified, the security plugin tries to determine the type from the file extension.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-tsalias</code></td> <td style="text-align: left">The alias for the root certificate, if any.</td> </tr> </tbody> </table></div> <h3 id="elasticsearch-settings">Elasticsearch settings</h3> <p>If you run a default Elasticsearch installation, which listens on transport port 9300 and uses <code class="highlighter-rouge">elasticsearch</code> as a cluster name, you can omit the following settings altogether. Otherwise, specify your Elasticsearch settings by using the following switches.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">-h</code></td> <td style="text-align: left">Elasticsearch hostname. Default is <code class="highlighter-rouge">localhost</code>.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-p</code></td> <td style="text-align: left">Elasticsearch port. Default is 9300—not the HTTP port.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-cn</code></td> <td style="text-align: left">Cluster name. Default is <code class="highlighter-rouge">elasticsearch</code>.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-icl</code></td> <td style="text-align: left">Ignore cluster name.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-sniff</code></td> <td style="text-align: left">Sniff cluster nodes. Sniffing detects available nodes using the Elasticsearch <code class="highlighter-rouge">_cluster/state</code> API.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-arc,--accept-red-cluster</code></td> <td style="text-align: left">Execute <code class="highlighter-rouge">securityadmin.sh</code> even if the cluster state is red. Default is false, which means the script will not execute on a red cluster.</td> </tr> </tbody> </table></div> <h3 id="certificate-validation-settings">Certificate validation settings</h3> <p>Use the following options to control certificate validation.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">-nhnv</code></td> <td style="text-align: left">Do not validate hostname. Default is false.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-nrhn</code></td> <td style="text-align: left">Do not resolve hostname. Only relevant if <code class="highlighter-rouge">-nhnv</code> is not set.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-noopenssl</code></td> <td style="text-align: left">Do not use OpenSSL, even if available. Default is to use OpenSSL if it is available.</td> </tr> </tbody> </table></div> <h3 id="configuration-files-settings">Configuration files settings</h3> <p>The following switches define which configuration files you want to push to the security plugin. You can either push a single file or specify a directory containing one or more configuration files.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">-cd</code></td> <td style="text-align: left">Directory containing multiple security plugin configuration files.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-f</code></td> <td style="text-align: left">Single configuration file. Can’t be used with <code class="highlighter-rouge">-cd</code>.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-t</code></td> <td style="text-align: left">File type.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-rl</code></td> <td style="text-align: left">Reload the current configuration and flush the internal cache.</td> </tr> </tbody> </table></div> <p>To upload all configuration files in a directory, use this:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./securityadmin.sh <span class="nt">-cd</span> ../securityconfig <span class="nt">-ts</span> ... <span class="nt">-tspass</span> ... <span class="nt">-ks</span> ... <span class="nt">-kspass</span> ...
</code></pre></div></div> <p>If you want to push a single configuration file, use this:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./securityadmin.sh <span class="nt">-f</span> ../securityconfig/internal_users.yml <span class="nt">-t</span> internalusers  <span class="se">\</span>
    <span class="nt">-ts</span> ... <span class="nt">-tspass</span> ... <span class="nt">-ks</span> ... <span class="nt">-kspass</span> ...
</code></pre></div></div> <p>The file type must be one of the following:</p> <ul> <li>config</li> <li>roles</li> <li>rolesmapping</li> <li>internalusers</li> <li>actiongroups</li> </ul> <h3 id="cipher-settings">Cipher settings</h3> <p>You probably won’t need to change cipher settings. If you need to, use the following options.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">-ec</code></td> <td style="text-align: left">Comma-separated list of enabled TLS ciphers.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-ep</code></td> <td style="text-align: left">Comma-separated list of enabled TLS protocols.</td> </tr> </tbody> </table></div> <h3 id="backup-restore-and-migrate">Backup, restore, and migrate</h3> <p>You can download all current configuration files from your cluster with the following command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./securityadmin.sh <span class="nt">-backup</span> /file/path <span class="nt">-ts</span> ... <span class="nt">-tspass</span> ... <span class="nt">-ks</span> ... <span class="nt">-kspass</span> ...
</code></pre></div></div> <p>This command dumps the current security plugin configuration from your cluster to individual files in the directory you specify. You can then use these files as backups or to load the configuration into a different cluster. This command is useful when moving a proof-of-concept to production:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./securityadmin.sh <span class="nt">-backup</span> ~ <span class="nt">-icl</span> <span class="nt">-nhnv</span> <span class="nt">-cacert</span> ../../../config/root-ca.pem <span class="nt">-cert</span> ../../../config/kirk.pem <span class="nt">-key</span> ../../../config/kirk-key.pem
</code></pre></div></div> <p>To upload the dumped files to another cluster:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./securityadmin.sh <span class="nt">-h</span> production.example.com <span class="nt">-p</span> 9301 <span class="nt">-cd</span> /etc/backup/ <span class="nt">-ts</span> ... <span class="nt">-tspass</span> ... <span class="nt">-ks</span> ... <span class="nt">-kspass</span> ...
</code></pre></div></div> <p>To migrate configuration YAML files from the Open Distro for Elasticsearch 0.x.x format to the 1.x.x format:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./securityadmin.sh <span class="nt">-migrate</span> ../securityconfig <span class="nt">-ts</span> ... <span class="nt">-tspass</span> ... <span class="nt">-ks</span> ... <span class="nt">-kspass</span> ...
</code></pre></div></div> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">-backup</code></td> <td style="text-align: left">Retrieve the current security plugin configuration from a running cluster and dump it to the working directory.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-migrate</code></td> <td style="text-align: left">Migrate configuration YAML files from version 0.x.x to 1.x.x.</td> </tr> </tbody> </table></div> <h3 id="other-options">Other options</h3> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">-dci</code></td> <td style="text-align: left">Delete the security plugin configuration index and exit. This option is useful if the cluster state is red due to a corrupted security plugin index.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-esa</code></td> <td style="text-align: left">Enable shard allocation and exit. This option is useful if you disabled shard allocation while performing a full cluster restart and need to recreate the security plugin index.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-w</code></td> <td style="text-align: left">Displays information about the used admin certificate.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-rl</code></td> <td style="text-align: left">By default, the security plugin caches authenticated users, along with their roles and permissions, for one hour. This option reloads the current security plugin configuration stored in your cluster, invalidating any cached users, roles, and permissions.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-i</code></td> <td style="text-align: left">The security plugin index name. Default is <code class="highlighter-rouge">.opendistro_security</code>.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-er</code></td> <td style="text-align: left">Set explicit number of replicas or auto-expand expression for the <code class="highlighter-rouge">opendistro_security</code> index.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-era</code></td> <td style="text-align: left">Enable replica auto-expand.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-dra</code></td> <td style="text-align: left">Disable replica auto-expand.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">-us</code></td> <td style="text-align: left">Update the replica settings.</td> </tr> </tbody> </table></div> </div> </div> <div class="toc"> <ul class="toc-list"> <li class="toc-item"><a href="#configure-the-admin-certificate">Configure the admin certificate</a></li> <li class="toc-item"><a href="#basic-usage">Basic usage</a></li> <li class="toc-item"><a href="#sample-commands">Sample commands</a></li> <li class="toc-item"><a href="#using-securityadmin-with-keystore-and-truststore-files">Using securityadmin with keystore and truststore files</a></li> </ul> </div> <div class="search-overlay"></div> </div> <script> anchors.add(); </script> </body> </html>
