<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Backend Configuration - Open Distro for Elasticsearch Documentation</title> <link rel="shortcut icon" href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-135423944-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-135423944-1'); </script> <script type="text/javascript" src="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Backend Configuration | Open Distro for Elasticsearch Documentation</title> <meta name="generator" content="Jekyll v3.8.6" /> <meta property="og:title" content="Backend Configuration" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation for Open Distro for Elasticsearch, the community-driven, 100% open source distribution of Elasticsearch with advanced security, alerting, deep performance analysis, and more." /> <meta property="og:description" content="Documentation for Open Distro for Elasticsearch, the community-driven, 100% open source distribution of Elasticsearch with advanced security, alerting, deep performance analysis, and more." /> <link rel="canonical" href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/configuration/" /> <meta property="og:url" content="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/configuration/" /> <meta property="og:site_name" content="Open Distro for Elasticsearch Documentation" /> <script type="application/ld+json"> {"description":"Documentation for Open Distro for Elasticsearch, the community-driven, 100% open source distribution of Elasticsearch with advanced security, alerting, deep performance analysis, and more.","@type":"WebPage","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/assets/images/logo.svg"}},"url":"https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/configuration/","headline":"Backend Configuration","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script> <!-- SiteCatalyst code version: H.25.1. Copyright 1996-2012 Adobe, Inc. All Rights Reserved --> <script><!-- /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/ var s_code=s.t();if(s_code)document.write(s_code)//--></script> <script language="JavaScript" type="text/javascript"><!-- if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-') //--></script> <noscript> <img src="//amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazonalldev2/1/H.25.1--NS/0" height="1" width="1" border="0" alt="" /> </noscript> <!--/DO NOT REMOVE/--> <!-- End SiteCatalyst code version: H.25.1. --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/version-history/" class="nav-list-link">Version History</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/" class="nav-list-link">Install and Configure</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/docker/" class="nav-list-link">Docker</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/rpm/" class="nav-list-link">RPM</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/deb/" class="nav-list-link">Debian Package</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/helm/" class="nav-list-link">Helm</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/tar/" class="nav-list-link">Tarball</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/windows/" class="nav-list-link">Windows</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/docker-security/" class="nav-list-link">Docker Security Configuration</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/plugins/" class="nav-list-link">Standalone Elasticsearch Plugin Install</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/ami/" class="nav-list-link">Amazon Machine Image</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/other-components/" class="nav-list-link">Other Components</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/install/encryption-at-rest/" class="nav-list-link">Encryption at Rest</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/" class="nav-list-link">Upgrade</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/1-0-0/" class="nav-list-link">Upgrade to 1.x.x</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/1-11.0/" class="nav-list-link">Upgrade to 1.11.0</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/1-10-1/" class="nav-list-link">Upgrade to 1.10.1</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/1-8-0/" class="nav-list-link">Upgrade to 1.8.0</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/rolling/" class="nav-list-link">Rolling Upgrade</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/cluster-restart/" class="nav-list-link">Cluster Restart Upgrade</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/upgrade/docker/" class="nav-list-link">Docker Upgrade</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/" class="nav-list-link">Elasticsearch</a><ul class="nav-list "><li class="nav-list-item active"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/configuration/" class="nav-list-link">Configuration</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/cluster/" class="nav-list-link">Cluster Formation</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/index-data/" class="nav-list-link">Index Data</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/index-alias/" class="nav-list-link">Index Aliases</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/index-templates/" class="nav-list-link">Index Templates</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/reindex-data/" class="nav-list-link">Reindex Data</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/catapis/" class="nav-list-link">CAT API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/term/" class="nav-list-link">Term-Level Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/full-text/" class="nav-list-link">Full-Text Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/search-template/" class="nav-list-link">Search Templates</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/bool/" class="nav-list-link">Boolean Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/ux/" class="nav-list-link">Search Experience</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/logs/" class="nav-list-link">Logs</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/snapshot-restore/" class="nav-list-link">Take and Restore Snapshots</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/units/" class="nav-list-link">Supported Units</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/common-parameters/" class="nav-list-link">Common REST Parameters</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/popular-api/" class="nav-list-link">Popular APIs</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/elasticsearch/rest-api-reference/" class="nav-list-link">REST API Reference</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/kibana/" class="nav-list-link">Kibana</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/kibana/plugins/" class="nav-list-link">Standalone Kibana Plugin Install</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/kibana/maptiles/" class="nav-list-link">WMS Map Server</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/" class="nav-list-link">Security</a><ul class="nav-list "><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/" class="nav-list-link">Configuration</a><ul class="nav-list"><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/concepts/" class="nav-list-link">Authentication flow</a> </li><li class="nav-list-item active"> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/configuration/" class="nav-list-link active">Backend Configuration</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/yaml/" class="nav-list-link">YAML Files</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/tls/" class="nav-list-link">TLS Certificates</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/generate-certificates/" class="nav-list-link">Generate Certificates</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/security-admin/" class="nav-list-link">Apply Changes with securityadmin.sh</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/ldap/" class="nav-list-link">Active Directory and LDAP</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/saml/" class="nav-list-link">SAML</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/openid-connect/" class="nav-list-link">OpenID Connect</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/proxy/" class="nav-list-link">Proxy-based authentication</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/disable/" class="nav-list-link">Disable Security</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/" class="nav-list-link">Access Control</a><ul class="nav-list"><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/users-roles/" class="nav-list-link">Users and Roles</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/document-level-security/" class="nav-list-link">Document-Level Security</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/field-level-security/" class="nav-list-link">Field-Level Security</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/field-masking/" class="nav-list-link">Field Masking</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/impersonation/" class="nav-list-link">User Impersonation</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/multi-tenancy/" class="nav-list-link">Kibana Multi-Tenancy</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/cross-cluster-search/" class="nav-list-link">Cross-Cluster Search</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/permissions/" class="nav-list-link">Permissions</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/default-action-groups/" class="nav-list-link">Default Action Groups</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/access-control/api/" class="nav-list-link">API</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/audit-logs/" class="nav-list-link">Audit Logs</a><ul class="nav-list"><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/audit-logs/field-reference/" class="nav-list-link">Audit Log Field Reference</a> </li><li class="nav-list-item "> <a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/audit-logs/storage-types/" class="nav-list-link">Audit Log Storage Types</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/" class="nav-list-link">Alerting</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/monitors/" class="nav-list-link">Monitors</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/settings/" class="nav-list-link">Management</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/api/" class="nav-list-link">API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/security-roles/" class="nav-list-link">Security Roles</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/alerting/cron/" class="nav-list-link">Cron</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/" class="nav-list-link">SQL</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/workbench/" class="nav-list-link">Workbench</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/cli/" class="nav-list-link">SQL CLI</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/basic/" class="nav-list-link">Basic Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/complex/" class="nav-list-link">Complex Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/partiql/" class="nav-list-link">JSON Support</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/sql-full-text/" class="nav-list-link">Full-Text Search</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/metadata/" class="nav-list-link">Metadata Queries</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/functions/" class="nav-list-link">Functions</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/window/" class="nav-list-link">Window Functions</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/delete/" class="nav-list-link">Delete</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/endpoints/" class="nav-list-link">Endpoint</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/protocol/" class="nav-list-link">Protocol</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/monitoring/" class="nav-list-link">Monitoring</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/settings/" class="nav-list-link">Settings</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/troubleshoot/" class="nav-list-link">Troubleshooting</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/limitation/" class="nav-list-link">Limitations</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/jdbc/" class="nav-list-link">JDBC Driver</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/sql/odbc/" class="nav-list-link">ODBC Driver</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/" class="nav-list-link">PPL</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/endpoint/" class="nav-list-link">Endpoint</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/protocol/" class="nav-list-link">Protocol</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/settings/" class="nav-list-link">Settings</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/commands/" class="nav-list-link">Commands</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ppl/functions/" class="nav-list-link">Functions</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/" class="nav-list-link">Index State Management</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/policies/" class="nav-list-link">Policies</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/managedindices/" class="nav-list-link">Managed Indices</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/settings/" class="nav-list-link">Settings</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/api/" class="nav-list-link">ISM API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ism/refresh-analyzer/" class="nav-list-link">Refresh Search Analyzer</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/knn/" class="nav-list-link">KNN</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/knn/settings/" class="nav-list-link">Settings and Statistics</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ad/" class="nav-list-link">Anomaly Detection</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ad/api/" class="nav-list-link">Anomaly Detection API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/ad/cli/" class="nav-list-link">Anomaly Detection CLI</a></li></ul></li><li class="nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/notebooks/" class="nav-list-link">Notebooks</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/pa/" class="nav-list-link">Performance Analyzer</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/pa/api/" class="nav-list-link">API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/pa/dashboards/" class="nav-list-link">Create Dashboards</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/pa/reference/" class="nav-list-link">Metrics Reference</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/rca/" class="nav-list-link">Root Cause Analysis</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/rca/api/" class="nav-list-link">API</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/rca/reference/" class="nav-list-link">RCA Reference</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/" class="nav-list-link">Troubleshoot</a><ul class="nav-list "><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/tls/" class="nav-list-link">Troubleshoot TLS</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/saml/" class="nav-list-link">Troubleshoot SAML</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/openid-connect/" class="nav-list-link">Troubleshoot OpenID Connect</a></li><li class="nav-list-item "><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/troubleshoot/security-admin/" class="nav-list-link">Troubleshoot securityadmin.sh</a></li></ul></li><li class="nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/other/" class="nav-list-link">Other Resources</a></li></ul> </nav> <footer class="site-footer"> <p class="text-small text-grey-dk-100">See a problem? Submit <a href="https://github.com/opendistro/for-elasticsearch-docs/issues">issues</a> or <a href="https://github.com/opendistro/for-elasticsearch-docs/edit/master/docs/security/configuration/configuration.md">edit this page</a> on <a href="https://github.com/opendistro/for-elasticsearch-docs">GitHub</a>.</p> <p class="text-small text-grey-dk-100 mb-0">© 2020 Amazon Web Services, Inc. or its affiliates. All rights reserved.</p> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search..." aria-label="Search Open Distro for Elasticsearch Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://opendistro.github.io/for-elasticsearch/" class="site-button" > Open Distro for Elasticsearch home </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/">Security</a></li> <li class="breadcrumb-nav-list-item"><a href="https://opendistro.github.io/for-elasticsearch-docs/old/1.11.0/docs/security/configuration/">Configuration</a></li> <li class="breadcrumb-nav-list-item"><span>Backend Configuration</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="backend-configuration">Backend configuration</h1> <p>One of the first steps to using the security plugin is to decide on an authentication backend, which handles <a href="../concepts/#authentication-flow">steps 2-3 of the authentication flow</a>. The plugin has an internal user database, but many people prefer to use an existing authentication backend, such as an LDAP server, or some combination of the two.</p> <p>The main configuration file for authentication and authorization backends is <code class="highlighter-rouge">plugins/opendistro_security/securityconfig/config.yml</code>. It defines how the security plugin retrieves the user credentials, how it verifies these credentials, and how to fetch additional roles from backend systems (optional).</p> <p><code class="highlighter-rouge">config.yml</code> has three main parts:</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">opendistro_security</span><span class="pi">:</span>
  <span class="na">dynamic</span><span class="pi">:</span>
    <span class="na">http</span><span class="pi">:</span>
      <span class="s">...</span>
    <span class="na">authc</span><span class="pi">:</span>
      <span class="s">...</span>
    <span class="na">authz</span><span class="pi">:</span>
      <span class="s">...</span>
</code></pre></div></div> <p>For a more complete example, see the <a href="https://github.com/opendistro-for-elasticsearch/security/blob/master/securityconfig/config.yml">sample file on GitHub</a>.</p> <h2 id="http">HTTP</h2> <p>The <code class="highlighter-rouge">http</code> section has the following format:</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">anonymous_auth_enabled</span><span class="pi">:</span> <span class="s">&lt;true|false&gt;</span>
<span class="na">xff</span><span class="pi">:</span> <span class="c1"># optional section</span>
  <span class="na">enabled</span><span class="pi">:</span> <span class="s">&lt;true|false&gt;</span>
  <span class="na">internalProxies</span><span class="pi">:</span> <span class="s">&lt;string&gt;</span> <span class="c1"># Regex pattern</span>
  <span class="na">remoteIpHeader</span><span class="pi">:</span> <span class="s">&lt;string&gt;</span> <span class="c1"># Name of the header in which to look. Typically: x-forwarded-for</span>
  <span class="na">proxiesHeader</span><span class="pi">:</span> <span class="s">&lt;string&gt;</span>
  <span class="na">trustedProxies</span><span class="pi">:</span> <span class="s">&lt;string&gt;</span> <span class="c1"># Regex pattern</span>
</code></pre></div></div> <p>If you disable anonymous authentication, the security plugin won’t initialize if you have not provided at least one <code class="highlighter-rouge">authc</code>.</p> <h2 id="authentication">Authentication</h2> <p>The <code class="highlighter-rouge">authc</code> section has the following format:</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">&lt;name&gt;</span><span class="pi">:</span>
  <span class="na">http_enabled</span><span class="pi">:</span> <span class="s">&lt;true|false&gt;</span>
  <span class="na">transport_enabled</span><span class="pi">:</span> <span class="s">&lt;true|false&gt;</span>
  <span class="na">order</span><span class="pi">:</span> <span class="s">&lt;integer&gt;</span>
    <span class="s">http_authenticator</span><span class="pi">:</span>
      <span class="s">...</span>
    <span class="s">authentication_backend</span><span class="pi">:</span>
      <span class="s">...</span>
</code></pre></div></div> <p>An entry in the <code class="highlighter-rouge">authc</code> section is called an <em>authentication domain</em>. It specifies where to get the user credentials and against which backend they should be authenticated.</p> <p>You can use more than one authentication domain. Each authentication domain has a name (for example, <code class="highlighter-rouge">basic_auth_internal</code>), <code class="highlighter-rouge">enabled</code> flags, and an <code class="highlighter-rouge">order</code>. The order makes it possible to chain authentication domains together. The security plugin uses them in the order that you provide. If the user successfully authenticates with one domain, the security plugin skips the remaining domains.</p> <p><code class="highlighter-rouge">http_authenticator</code> specifies which authentication method that you want to use on the HTTP layer.</p> <p>This is the syntax for defining an authenticator on the HTTP layer:</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">http_authenticator</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">&lt;type&gt;</span>
  <span class="na">challenge</span><span class="pi">:</span> <span class="s">&lt;true|false&gt;</span>
  <span class="na">config</span><span class="pi">:</span>
    <span class="s">...</span>
</code></pre></div></div> <p>These are the allowed values for <code class="highlighter-rouge">type</code>:</p> <ul> <li><code class="highlighter-rouge">basic</code>: HTTP basic authentication. No additional configuration is needed.</li> <li><code class="highlighter-rouge">kerberos</code>: Kerberos authentication. Additional, <a href="#kerberos">Kerberos-specific configuration</a> is needed.</li> <li><code class="highlighter-rouge">jwt</code>: JSON web token authentication. Additional, <a href="#json-web-token">JWT-specific configuration</a> is needed.</li> <li><code class="highlighter-rouge">clientcert</code>: Authentication through a client TLS certificate. This certificate must be trusted by one of the root CAs in the truststore of your nodes.</li> </ul> <p>After setting an HTTP authenticator, you must specify against which backend system you want to authenticate the user:</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">authentication_backend</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">&lt;type&gt;</span>
  <span class="na">config</span><span class="pi">:</span>
    <span class="s">...</span>
</code></pre></div></div> <p>These are the possible values for <code class="highlighter-rouge">type</code>:</p> <ul> <li><code class="highlighter-rouge">noop</code>: No further authentication against any backend system is performed. Use <code class="highlighter-rouge">noop</code> if the HTTP authenticator has already authenticated the user completely, as in the case of JWT, Kerberos, or client certificate authentication.</li> <li><code class="highlighter-rouge">internal</code>: Use the users and roles defined in <code class="highlighter-rouge">internal_users.yml</code> for authentication.</li> <li><code class="highlighter-rouge">ldap</code>: Authenticate users against an LDAP server. This setting requires <a href="../ldap/">additional, LDAP-specific configuration settings</a>.</li> </ul> <h2 id="authorization">Authorization</h2> <p>After the user has been authenticated, the security plugin can optionally collect additional roles from backend systems. The authorization configuration has the following format:</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">authz</span><span class="pi">:</span>
  <span class="s">&lt;name&gt;</span><span class="pi">:</span>
    <span class="na">http_enabled</span><span class="pi">:</span> <span class="s">&lt;true|false&gt;</span>
    <span class="na">transport_enabled</span><span class="pi">:</span> <span class="s">&lt;true|false&gt;</span>
    <span class="na">authorization_backend</span><span class="pi">:</span>
      <span class="na">type</span><span class="pi">:</span> <span class="s">&lt;type&gt;</span>
      <span class="na">config</span><span class="pi">:</span>
        <span class="s">...</span>
</code></pre></div></div> <p>You can define multiple entries in this section the same way as you can for authentication entries. In this case, execution order is not relevant, so there is no <code class="highlighter-rouge">order</code> field.</p> <p>These are the possible values for <code class="highlighter-rouge">type</code>:</p> <ul> <li><code class="highlighter-rouge">noop</code>: Skip this step altogether.</li> <li><code class="highlighter-rouge">ldap</code>: Fetch additional roles from an LDAP server. This setting requires <a href="../ldap/">additional, LDAP-specific configuration settings</a>.</li> </ul> <h2 id="examples">Examples</h2> <p>The default <code class="highlighter-rouge">plugins/opendistro_security/securityconfig/config.yml</code> that ships with Open Distro for Elasticsearch contains many configuration examples. Use these examples as a starting point, and customize them to your needs.</p> <h2 id="http-basic">HTTP basic</h2> <p>To set up HTTP basic authentication, you must enable it in the <code class="highlighter-rouge">http_authenticator</code> section of the configuration:</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">http_authenticator</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">basic</span>
  <span class="na">challenge</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div> <p>In most cases, you set the <code class="highlighter-rouge">challenge</code> flag to <code class="highlighter-rouge">true</code>. The flag defines the behavior of the security plugin if the <code class="highlighter-rouge">Authorization</code> field in the HTTP header is not set.</p> <p>If <code class="highlighter-rouge">challenge</code> is set to <code class="highlighter-rouge">true</code>, the security plugin sends a response with status <code class="highlighter-rouge">UNAUTHORIZED</code> (401) back to the client. If the client is accessing the cluster with a browser, this triggers the authentication dialog box, and the user is prompted to enter a user name and password.</p> <p>If <code class="highlighter-rouge">challenge</code> is set to <code class="highlighter-rouge">false</code> and no <code class="highlighter-rouge">Authorization</code> header field is set, the security plugin does not send a <code class="highlighter-rouge">WWW-Authenticate</code> response back to the client, and authentication fails. You might want to use this setting if you have another challenge <code class="highlighter-rouge">http_authenticator</code> in your configured authentication domains. One such scenario is when you plan to use basic authentication and Kerberos together.</p> <h2 id="kerberos">Kerberos</h2> <p>Due to the nature of Kerberos, you must define some settings in <code class="highlighter-rouge">elasticsearch.yml</code> and some in <code class="highlighter-rouge">config.yml</code>.</p> <p>In <code class="highlighter-rouge">elasticsearch.yml</code>, define the following:</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">opendistro_security.kerberos.krb5_filepath</span><span class="pi">:</span> <span class="s1">'</span><span class="s">/etc/krb5.conf'</span>
<span class="s">opendistro_security.kerberos.acceptor_keytab_filepath</span><span class="pi">:</span> <span class="s1">'</span><span class="s">eskeytab.tab'</span>
</code></pre></div></div> <p><code class="highlighter-rouge">opendistro_security.kerberos.krb5_filepath</code> defines the path to your Kerberos configuration file. This file contains various settings regarding your Kerberos installation, for example, the realm names, hostnames, and ports of the Kerberos key distribution center (KDC).</p> <p><code class="highlighter-rouge">opendistro_security.kerberos.acceptor_keytab_filepath</code> defines the path to the keytab file, which contains the principal that the security plugin uses to issue requests against Kerberos.</p> <p><code class="highlighter-rouge">opendistro_security.kerberos.acceptor_principal: 'HTTP/localhost'</code> defines the principal that the security plugin uses to issue requests against Kerberos. This value must be present in the keytab file.</p> <p class="warning">Due to security restrictions, the keytab file must be placed in <code class="highlighter-rouge">config</code> or a subdirectory, and the path in <code class="highlighter-rouge">elasticsearch.yml</code> must be relative, not absolute.</p> <h3 id="dynamic-configuration">Dynamic configuration</h3> <p>A typical Kerberos authentication domain in <code class="highlighter-rouge">config.yml</code> looks like this:</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="na">authc</span><span class="pi">:</span>
      <span class="na">kerberos_auth_domain</span><span class="pi">:</span>
        <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">order</span><span class="pi">:</span> <span class="m">1</span>
        <span class="na">http_authenticator</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">kerberos</span>
          <span class="na">challenge</span><span class="pi">:</span> <span class="no">true</span>
          <span class="na">config</span><span class="pi">:</span>
            <span class="na">krb_debug</span><span class="pi">:</span> <span class="no">false</span>
            <span class="na">strip_realm_from_principal</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">authentication_backend</span><span class="pi">:</span>
          <span class="na">type</span><span class="pi">:</span> <span class="s">noop</span>
</code></pre></div></div> <p>Authentication against Kerberos through a browser on an HTTP level is achieved using SPNEGO. Kerberos/SPNEGO implementations vary, depending on your browser and operating system. This is important when deciding if you need to set the <code class="highlighter-rouge">challenge</code> flag to <code class="highlighter-rouge">true</code> or <code class="highlighter-rouge">false</code>.</p> <p>As with <a href="#http-basic">HTTP Basic Authentication</a>, this flag determines how the security plugin should react when no <code class="highlighter-rouge">Authorization</code> header is found in the HTTP request or if this header does not equal <code class="highlighter-rouge">negotiate</code>.</p> <p>If set to <code class="highlighter-rouge">true</code>, the security plugin sends a response with status code 401 and a <code class="highlighter-rouge">WWW-Authenticate</code> header set to <code class="highlighter-rouge">negotiate</code>. This tells the client (browser) to resend the request with the <code class="highlighter-rouge">Authorization</code> header set. If set to <code class="highlighter-rouge">false</code>, the security plugin cannot extract the credentials from the request, and authentication fails. Setting <code class="highlighter-rouge">challenge</code> to <code class="highlighter-rouge">false</code> thus makes sense only if the Kerberos credentials are sent in the initial request.</p> <p>As the name implies, setting <code class="highlighter-rouge">krb_debug</code> to <code class="highlighter-rouge">true</code> will output Kerberos-specific debugging messages to <code class="highlighter-rouge">stdout</code>. Use this setting if you encounter problems with your Kerberos integration.</p> <p>If you set <code class="highlighter-rouge">strip_realm_from_principal</code> to <code class="highlighter-rouge">true</code>, the security plugin strips the realm from the user name.</p> <h3 id="authentication-backend">Authentication backend</h3> <p>Because Kerberos/SPNEGO authenticates users on an HTTP level, no additional <code class="highlighter-rouge">authentication_backend</code> is needed. Set this value to <code class="highlighter-rouge">noop</code>.</p> <h2 id="json-web-token">JSON web token</h2> <p>JSON web tokens (JWTs) are JSON-based access tokens that assert one or more claims. They are commonly used to implement single sign-on (SSO) solutions and fall in the category of token-based authentication systems:</p> <ol> <li>A user logs in to an authentication server by providing credentials (for example, a user name and password).</li> <li>The authentication server validates the credentials.</li> <li>The authentication server creates an access token and signs it.</li> <li>The authentication server returns the token to the user.</li> <li>The user stores the access token.</li> <li>The user sends the access token alongside every request to the service that it wants to use.</li> <li>The service verifies the token and grants or denies access.</li> </ol> <p>A JSON web token is self-contained in the sense that it carries all necessary information to verify a user within itself. The tokens are base64-encoded, signed JSON objects.</p> <p>JSON web tokens consist of three parts:</p> <ol> <li>Header</li> <li>Payload</li> <li>Signature</li> </ol> <h3 id="header">Header</h3> <p>The header contains information about the used signing mechanism, as shown in the following example:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HS256"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"typ"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JWT"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p>In this case, the header states that the message was signed using HMAC-SHA256.</p> <h3 id="payload">Payload</h3> <p>The payload of a JSON web token contains the so-called <a href="http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html#RegisteredClaimName">JWT Claims</a>. A claim can be any piece of information about the user that the application that created the token has verified.</p> <p>The specification defines a set of standard claims with reserved names (“registered claims”). These include, for example, the token issuer, the expiration date, or the creation date.</p> <p>Public claims, on the other hand, can be created freely by the token issuer. They can contain arbitrary information, such as the user name and the roles of the user.</p> <p>Example:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"iss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1300819380</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"roles"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin, devops"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <h3 id="signature">Signature</h3> <p>The issuer of the token calculates the signature of the token by applying a cryptographic hash function on the base64-encoded header and payload. These three parts are then concatenated using periods to form a complete JSON web token:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>encoded = base64UrlEncode(header) + "." + base64UrlEncode(payload)
signature = HMACSHA256(encoded, 'secretkey');
jwt = encoded + "." + base64UrlEncode(signature)
</code></pre></div></div> <p>Example:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJsb2dnZWRJbkFzIjoiYWRtaW4iLCJpYXQiOjE0MjI3Nzk2Mzh9.gzSraSYS8EXBxLN_oWnFSRgCzcmJmMjLiuyu5CSpyHI
</code></pre></div></div> <h3 id="configure-json-web-tokens">Configure JSON web tokens</h3> <p class="warning">If JSON web tokens are the only authentication method that you use, disable the user cache by setting <code class="highlighter-rouge">opendistro_security.cache.ttl_minutes: 0</code>.</p> <p>Set up an authentication domain and choose <code class="highlighter-rouge">jwt</code> as the HTTP authentication type. Because the tokens already contain all required information to verify the request, <code class="highlighter-rouge">challenge</code> must be set to <code class="highlighter-rouge">false</code> and <code class="highlighter-rouge">authentication_backend</code> to <code class="highlighter-rouge">noop</code>.</p> <p>Example:</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jwt_auth_domain</span><span class="pi">:</span>
  <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">order</span><span class="pi">:</span> <span class="m">0</span>
  <span class="na">http_authenticator</span><span class="pi">:</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">jwt</span>
    <span class="na">challenge</span><span class="pi">:</span> <span class="no">false</span>
    <span class="na">config</span><span class="pi">:</span>
      <span class="na">signing_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">base64</span><span class="nv"> </span><span class="s">encoded</span><span class="nv"> </span><span class="s">key"</span>
      <span class="na">jwt_header</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Authorization"</span>
      <span class="na">jwt_url_parameter</span><span class="pi">:</span> <span class="no">null</span>
      <span class="na">subject_key</span><span class="pi">:</span> <span class="no">null</span>
      <span class="na">roles_key</span><span class="pi">:</span> <span class="no">null</span>
  <span class="na">authentication_backend</span><span class="pi">:</span>
<span class="na">I    type</span><span class="pi">:</span> <span class="s">noop</span>
</code></pre></div></div> <p>The following table shows the configuration parameters.</p> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Name</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left"><code class="highlighter-rouge">signing_key</code></td> <td style="text-align: left">The signing key to use when verifying the token. If you use a symmetric key algorithm, it is the base64-encoded shared secret. If you use an asymmetric algorithm, it contains the public key.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">jwt_header</code></td> <td style="text-align: left">The HTTP header in which the token is transmitted. This typically is the <code class="highlighter-rouge">Authorization</code> header with the <code class="highlighter-rouge">Bearer</code> schema: <code class="highlighter-rouge">Authorization: Bearer &lt;token&gt;</code>. Default is <code class="highlighter-rouge">Authorization</code>.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">jwt_url_parameter</code></td> <td style="text-align: left">If the token is not transmitted in the HTTP header, but as an URL parameter, define the name of this parameter here.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">subject_key</code></td> <td style="text-align: left">The key in the JSON payload that stores the user name. If not set, the <a href="https://tools.ietf.org/html/rfc7519#section-4.1.2">subject</a> registered claim is used.</td> </tr> <tr> <td style="text-align: left"><code class="highlighter-rouge">roles_key</code></td> <td style="text-align: left">The key in the JSON payload that stores the user’s roles. The value of this key must be a comma-separated list of roles.</td> </tr> </tbody> </table></div> <p>Because JSON web tokens are self-contained and the user is authenticated on the HTTP level, no additional <code class="highlighter-rouge">authentication_backend</code> is needed. Set this value to <code class="highlighter-rouge">noop</code>.</p> <h3 id="symmetric-key-algorithms-hmac">Symmetric key algorithms: HMAC</h3> <p>Hash-based message authentication codes (HMACs) are a group of algorithms that provide a way of signing messages by means of a shared key. The key is shared between the authentication server and the security plugin. It must be configured as a base64-encoded value in the <code class="highlighter-rouge">signing_key</code> setting:</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jwt_auth_domain</span><span class="pi">:</span>
  <span class="s">...</span>
    <span class="s">config</span><span class="pi">:</span>
      <span class="na">signing_key</span><span class="pi">:</span> <span class="s2">"</span><span class="s">a3M5MjEwamRqOTAxOTJqZDE="</span>
      <span class="s">...</span>
</code></pre></div></div> <h3 id="asymmetric-key-algorithms-rsa-and-ecdsa">Asymmetric key algorithms: RSA and ECDSA</h3> <p>RSA and ECDSA are asymmetric encryption and digital signature algorithms and use a public/private key pair to sign and verify tokens. This means that they use a private key for signing the token, while the security plugin needs to know only the public key to verify it.</p> <p>Because you cannot issue new tokens with the public key—and because you can make valid assumptions about the creator of the token—RSA and ECDSA are considered more secure than using HMAC.</p> <p>To use RS256, you need to configure only the (non-base64-encoded) public RSA key as <code class="highlighter-rouge">signing_key</code> in the JWT configuration:</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">jwt_auth_domain</span><span class="pi">:</span>
  <span class="s">...</span>
    <span class="s">config</span><span class="pi">:</span>
      <span class="na">signing_key</span><span class="pi">:</span> <span class="pi">|-</span>
        <span class="s">-----BEGIN PUBLIC KEY-----</span>
        <span class="s">MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQK...</span>
        <span class="s">-----END PUBLIC KEY-----</span>
      <span class="s">...</span>
</code></pre></div></div> <p>The security plugin automatically detects the algorithm (RSA/ECDSA), and if necessary you can break the key into multiple lines.</p> <h3 id="bearer-authentication-for-http-requests">Bearer authentication for HTTP requests</h3> <p>The most common way of transmitting a JSON web token in an HTTP request is to add it as an HTTP header with the bearer authentication schema:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Authorization: Bearer &lt;JWT&gt;
</code></pre></div></div> <p>The default name of the header is <code class="highlighter-rouge">Authorization</code>. If required by your authentication server or proxy, you can also use a different HTTP header name using the <code class="highlighter-rouge">jwt_header</code> configuration key.</p> <p>As with HTTP basic authentication, you should use HTTPS instead of HTTP when transmitting JSON web tokens in HTTP requests.</p> <h3 id="url-parameters-for-http-requests">URL parameters for HTTP requests</h3> <p>Although the most common way to transmit JWTs in HTTP requests is to use a header field, the security plugin also supports parameters. Configure the name of the <code class="highlighter-rouge">GET</code> parameter using the following key:</p> <div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="na">config</span><span class="pi">:</span>
      <span class="na">signing_key</span><span class="pi">:</span> <span class="s">...</span>
      <span class="na">jwt_url_parameter</span><span class="pi">:</span> <span class="s2">"</span><span class="s">parameter_name"</span>
      <span class="na">subject_key</span><span class="pi">:</span> <span class="s">...</span>
      <span class="na">roles_key</span><span class="pi">:</span> <span class="s">...</span>
</code></pre></div></div> <p>As with HTTP basic authentication, you should use HTTPS instead of HTTP.</p> <h3 id="validated-registered-claims">Validated registered claims</h3> <p>The following registered claims are validated automatically:</p> <ul> <li>“iat” (Issued At) Claim</li> <li>“nbf” (Not Before) Claim</li> <li>“exp” (Expiration Time) Claim</li> </ul> <h3 id="supported-formats-and-algorithms">Supported formats and algorithms</h3> <p>The security plugin supports digitally signed, compact JSON web tokens with all standard algorithms:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HS256: HMAC using SHA-256
HS384: HMAC using SHA-384
HS512: HMAC using SHA-512
RS256: RSASSA-PKCS-v1_5 using SHA-256
RS384: RSASSA-PKCS-v1_5 using SHA-384
RS512: RSASSA-PKCS-v1_5 using SHA-512
PS256: RSASSA-PSS using SHA-256 and MGF1 with SHA-256
PS384: RSASSA-PSS using SHA-384 and MGF1 with SHA-384
PS512: RSASSA-PSS using SHA-512 and MGF1 with SHA-512
ES256: ECDSA using P-256 and SHA-256
ES384: ECDSA using P-384 and SHA-384
ES512: ECDSA using P-521 and SHA-512
</code></pre></div></div> </div> </div> <div class="toc"> <ul class="toc-list"> <li class="toc-item"><a href="#http">HTTP</a></li> <li class="toc-item"><a href="#authentication">Authentication</a></li> <li class="toc-item"><a href="#authorization">Authorization</a></li> <li class="toc-item"><a href="#examples">Examples</a></li> <li class="toc-item"><a href="#http-basic">HTTP basic</a></li> <li class="toc-item"><a href="#kerberos">Kerberos</a></li> <li class="toc-item"><a href="#json-web-token">JSON web token</a></li> </ul> </div> <div class="search-overlay"></div> </div> <script> anchors.add(); </script> </body> </html>
